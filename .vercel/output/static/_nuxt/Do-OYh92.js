var Pe=Object.defineProperty;var $e=(e,a,s)=>a in e?Pe(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s;var re=(e,a,s)=>$e(e,typeof a!="symbol"?a+"":a,s);import{G as ke,J as Ne,K as R,e as F,w as ae,L as N,R as le,M as b,P as ce,aR as K,aS as Be,aT as Ce,B as P,aU as ie,aD as W,aV as Te,aW as Oe,aX as Me,aM as Ve,ah as ye,a1 as ze,ai as De,x as de,ak as je,az as Le,ao as Ue,a4 as J,r as A,o as oe,h as ue,d as L,f as T,n as z,W as be,$ as Re,ap as We,aG as Ae,al as Ee,aC as U,aY as Ge,g as Ke,z as X,t as Z,aZ as Je,c as we,U as Ye,a_ as se,a$ as Xe,b0 as Ze,af as He,ag as Qe,b1 as Se,b2 as _e,u as ea,b3 as aa,b4 as ta,b5 as ra,b6 as sa,a as ia,b7 as na,b8 as la,b9 as oa,ba as qe,bb as xe,bc as ne,bd as ua}from"./BrLmWrYa.js";const ca=ke({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(e){const a=e;return Ne(),(s,t)=>(F(),R(b(ce),le(a,{onMousedown:t[0]||(t[0]=u=>{!u.defaultPrevented&&u.detail>1&&u.preventDefault()})}),{default:ae(()=>[N(s.$slots,"default")]),_:3},16))}}),Fe=Ce?window:void 0;function _(e){var a;const s=W(e);return(a=s==null?void 0:s.$el)!=null?a:s}function H(...e){const a=[],s=()=>{a.forEach(o=>o()),a.length=0},t=(o,n,i,l)=>(o.addEventListener(n,i,l),()=>o.removeEventListener(n,i,l)),u=P(()=>{const o=ie(W(e[0])).filter(n=>n!=null);return o.every(n=>typeof n!="string")?o:void 0}),p=Te(()=>{var o,n;return[(n=(o=u.value)==null?void 0:o.map(i=>_(i)))!=null?n:[Fe].filter(i=>i!=null),ie(W(u.value?e[1]:e[0])),ie(b(u.value?e[2]:e[1])),W(u.value?e[3]:e[2])]},([o,n,i,l])=>{if(s(),!(o!=null&&o.length)||!(n!=null&&n.length)||!(i!=null&&i.length))return;const f=Me(l)?{...l}:l;a.push(...o.flatMap(q=>n.flatMap(w=>i.map(x=>t(q,w,x,f)))))},{flush:"post"}),y=()=>{p(),s()};return Oe(s),y}let Ie=!1;function Oa(e,a,s={}){const{window:t=Fe,ignore:u=[],capture:p=!0,detectIframe:y=!1,controls:o=!1}=s;if(!t)return o?{stop:K,cancel:K,trigger:K}:K;if(Be&&!Ie){Ie=!0;const c={passive:!0};Array.from(t.document.body.children).forEach(g=>H(g,"click",K,c)),H(t.document.documentElement,"click",K,c)}let n=!0;const i=c=>W(u).some(g=>{if(typeof g=="string")return Array.from(t.document.querySelectorAll(g)).some(m=>m===c.target||c.composedPath().includes(m));{const m=_(g);return m&&(c.target===m||c.composedPath().includes(m))}});function l(c){const g=W(c);return g&&g.$.subTree.shapeFlag===16}function f(c,g){const m=W(c),v=m.$.subTree&&m.$.subTree.children;return v==null||!Array.isArray(v)?!1:v.some(S=>S.el===g.target||g.composedPath().includes(S.el))}const q=c=>{const g=_(e);if(c.target!=null&&!(!(g instanceof Element)&&l(e)&&f(e,c))&&!(!g||g===c.target||c.composedPath().includes(g))){if("detail"in c&&c.detail===0&&(n=!i(c)),!n){n=!0;return}a(c)}};let w=!1;const x=[H(t,"click",c=>{w||(w=!0,setTimeout(()=>{w=!1},0),q(c))},{passive:!0,capture:p}),H(t,"pointerdown",c=>{const g=_(e);n=!i(c)&&!!(g&&!c.composedPath().includes(g))},{passive:!0}),y&&H(t,"blur",c=>{setTimeout(()=>{var g;const m=_(e);((g=t.document.activeElement)==null?void 0:g.tagName)==="IFRAME"&&!(m!=null&&m.contains(t.document.activeElement))&&a(c)},0)},{passive:!0})].filter(Boolean),$=()=>x.forEach(c=>c());return o?{stop:$,cancel:()=>{n=!1},trigger:c=>{n=!0,q(c),n=!1}}:$}const Q=new Map;function da(e){const a=Ve();function s(o){var n;const i=Q.get(e)||new Set;i.add(o),Q.set(e,i);const l=()=>u(o);return(n=a==null?void 0:a.cleanups)==null||n.push(l),l}function t(o){function n(...i){u(n),o(...i)}return s(n)}function u(o){const n=Q.get(e);n&&(n.delete(o),n.size||p())}function p(){Q.delete(e)}function y(o,n){var i;(i=Q.get(e))==null||i.forEach(l=>l(o,n))}return{on:s,once:t,off:u,emit:y,reset:p}}const fa={slots:{root:"relative inline-flex items-center",base:["w-full rounded-md border-0 placeholder:text-dimmed focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute inset-y-0 start-0 flex items-center",leadingIcon:"shrink-0 text-dimmed",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute inset-y-0 end-0 flex items-center",trailingIcon:"shrink-0 text-dimmed"},variants:{buttonGroup:{horizontal:{root:"group",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2",trailing:"pe-2",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-muted file:outline-none"}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},pa=["id","type","value","name","placeholder","disabled","required","autocomplete"],Ma=Object.assign({inheritAttrs:!1},{__name:"UInput",props:ye({as:{type:null,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},type:{type:null,required:!1,default:"text"},placeholder:{type:String,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},autocomplete:{type:null,required:!1,default:"off"},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},disabled:{type:Boolean,required:!1},highlight:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:String,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:String,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:String,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1}},{modelValue:{type:[String,Number,null]},modelModifiers:{}}),emits:ye(["update:modelValue","blur","change"],["update:modelValue"]),setup(e,{expose:a,emit:s}){const t=e,u=s,p=ze(),[y,o]=De(e,"modelValue"),n=de(),{emitFormBlur:i,emitFormInput:l,emitFormChange:f,size:q,color:w,id:x,name:$,highlight:c,disabled:g,emitFormFocus:m,ariaAttrs:v}=je(t,{deferInputValidation:!0}),{orientation:S,size:te}=Le(t),{isLeading:G,isTrailing:r,leadingIconName:h,trailingIconName:E}=Ue(t),k=P(()=>te.value||q.value),I=P(()=>{var d;return J({extend:J(fa),...((d=n.ui)==null?void 0:d.input)||{}})({type:t.type,color:w.value,variant:t.variant,size:k==null?void 0:k.value,loading:t.loading,highlight:c.value,leading:G.value||!!t.avatar||!!p.leading,trailing:r.value||!!p.trailing,buttonGroup:S.value})}),B=A(null);function C(d){o.trim&&(d=(d==null?void 0:d.trim())??null),(o.number||t.type==="number")&&(d=We(d)),o.nullify&&(d||(d=null)),y.value=d,l()}function O(d){o.lazy||C(d.target.value)}function M(d){const Y=d.target.value;o.lazy&&C(Y),o.trim&&(d.target.value=Y.trim()),f(),u("change",d)}function V(d){i(),u("blur",d)}function D(){var d;t.autofocus&&((d=B.value)==null||d.focus())}return oe(()=>{setTimeout(()=>{D()},t.autofocusDelay)}),a({inputRef:B}),(d,Y)=>{var fe;return F(),R(b(ce),{as:e.as,class:z(I.value.root({class:[t.class,(fe=t.ui)==null?void 0:fe.root]}))},{default:ae(()=>{var pe,ge,me;return[ue("input",le({id:b(x),ref_key:"inputRef",ref:B,type:e.type,value:b(y),name:b($),placeholder:e.placeholder,class:I.value.base({class:(pe=t.ui)==null?void 0:pe.base}),disabled:b(g),required:e.required,autocomplete:e.autocomplete},{...d.$attrs,...b(v)},{onInput:O,onBlur:V,onChange:M,onFocus:Y[0]||(Y[0]=(...j)=>b(m)&&b(m)(...j))}),null,16,pa),N(d.$slots,"default"),b(G)||e.avatar||p.leading?(F(),L("span",{key:0,class:z(I.value.leading({class:(ge=t.ui)==null?void 0:ge.leading}))},[N(d.$slots,"leading",{},()=>{var j,he,ve;return[b(G)&&b(h)?(F(),R(be,{key:0,name:b(h),class:z(I.value.leadingIcon({class:(j=t.ui)==null?void 0:j.leadingIcon}))},null,8,["name","class"])):e.avatar?(F(),R(Re,le({key:1,size:((he=t.ui)==null?void 0:he.leadingAvatarSize)||I.value.leadingAvatarSize()},e.avatar,{class:I.value.leadingAvatar({class:(ve=t.ui)==null?void 0:ve.leadingAvatar})}),null,16,["size","class"])):T("",!0)]})],2)):T("",!0),b(r)||p.trailing?(F(),L("span",{key:1,class:z(I.value.trailing({class:(me=t.ui)==null?void 0:me.trailing}))},[N(d.$slots,"trailing",{},()=>{var j;return[b(E)?(F(),R(be,{key:0,name:b(E),class:z(I.value.trailingIcon({class:(j=t.ui)==null?void 0:j.trailingIcon}))},null,8,["name","class"])):T("",!0)]})],2)):T("",!0)]}),_:3},8,["as","class"])}}}),ga={slots:{root:"",wrapper:"",labelWrapper:"flex content-center items-center justify-between",label:"block font-medium text-default",container:"mt-1 relative",description:"text-muted",error:"mt-2 text-error",hint:"text-muted",help:"mt-2 text-muted"},variants:{size:{xs:{root:"text-xs"},sm:{root:"text-xs"},md:{root:"text-sm"},lg:{root:"text-sm"},xl:{root:"text-base"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-error"}}},defaultVariants:{size:"md"}},ma=["id"],ha=["id"],va=["id"],Va={__name:"UFormField",props:{as:{type:null,required:!1},name:{type:String,required:!1},errorPattern:{type:null,required:!1},label:{type:String,required:!1},description:{type:String,required:!1},help:{type:String,required:!1},error:{type:[String,Boolean],required:!1},hint:{type:String,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},eagerValidation:{type:Boolean,required:!1},validateOnInputDelay:{type:Number,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(e){const a=e,s=ze(),t=de(),u=P(()=>{var i;return J({extend:J(ga),...((i=t.ui)==null?void 0:i.formField)||{}})({size:a.size,required:a.required})}),p=Ae("form-errors",null),y=P(()=>{var i,l;return a.error||((l=(i=p==null?void 0:p.value)==null?void 0:i.find(f=>f.name&&(f.name===a.name||a.errorPattern&&f.name.match(a.errorPattern))))==null?void 0:l.message)}),o=A(Ee()),n=o.value;return U(Je,o),U(Ge,P(()=>({error:y.value,name:a.name,size:a.size,eagerValidation:a.eagerValidation,validateOnInputDelay:a.validateOnInputDelay,errorPattern:a.errorPattern,hint:a.hint,description:a.description,help:a.help,ariaId:n}))),(i,l)=>{var f;return F(),R(b(ce),{as:e.as,class:z(u.value.root({class:[a.class,(f=a.ui)==null?void 0:f.root]}))},{default:ae(()=>{var q,w,x,$,c,g,m,v;return[ue("div",{class:z(u.value.wrapper({class:(q=a.ui)==null?void 0:q.wrapper}))},[e.label||s.label?(F(),L("div",{key:0,class:z(u.value.labelWrapper({class:(w=a.ui)==null?void 0:w.labelWrapper}))},[Ke(b(ca),{for:o.value,class:z(u.value.label({class:(x=a.ui)==null?void 0:x.label}))},{default:ae(()=>[N(i.$slots,"label",{label:e.label},()=>[X(Z(e.label),1)])]),_:3},8,["for","class"]),e.hint||s.hint?(F(),L("span",{key:0,id:`${b(n)}-hint`,class:z(u.value.hint({class:($=a.ui)==null?void 0:$.hint}))},[N(i.$slots,"hint",{hint:e.hint},()=>[X(Z(e.hint),1)])],10,ma)):T("",!0)],2)):T("",!0),e.description||s.description?(F(),L("p",{key:1,id:`${b(n)}-description`,class:z(u.value.description({class:(c=a.ui)==null?void 0:c.description}))},[N(i.$slots,"description",{description:e.description},()=>[X(Z(e.description),1)])],10,ha)):T("",!0)],2),ue("div",{class:z([(e.label||!!s.label||e.description||!!s.description)&&u.value.container({class:(g=a.ui)==null?void 0:g.container})])},[N(i.$slots,"default",{error:y.value}),typeof y.value=="string"&&y.value||s.error?(F(),L("p",{key:0,id:`${b(n)}-error`,class:z(u.value.error({class:(m=a.ui)==null?void 0:m.error}))},[N(i.$slots,"error",{error:y.value},()=>[X(Z(y.value),1)])],10,va)):e.help||s.help?(F(),L("p",{key:1,class:z(u.value.help({class:(v=a.ui)==null?void 0:v.help}))},[N(i.$slots,"help",{help:e.help},()=>[X(Z(e.help),1)])],2)):T("",!0)],2)]}),_:3},8,["as","class"])}}};function ya(e){return e.validate&&e.__isYupSchema__}function ba(e){return e.inner!==void 0}function wa(e){return"schema"in e&&typeof e.coercer=="function"&&typeof e.validator=="function"&&typeof e.refiner=="function"}function Sa(e){return e.validateAsync!==void 0&&e.id!==void 0}function qa(e){return e.isJoi===!0}function xa(e){return"~standard"in e}async function Ia(e,a){var t;const s=await a["~standard"].validate(e);return s.issues?{errors:((t=s.issues)==null?void 0:t.map(u=>{var p;return{name:((p=u.path)==null?void 0:p.map(y=>typeof y=="object"?y.key:y).join("."))||"",message:u.message}}))||[],result:null}:{errors:null,result:s.value}}async function za(e,a){try{return{errors:null,result:await a.validate(e,{abortEarly:!1})}}catch(s){if(ba(s))return{errors:s.inner.map(u=>({name:u.path??"",message:u.message})),result:null};throw s}}async function Aa(e,a){const[s,t]=a.validate(e);return s?{errors:s.failures().map(p=>({message:p.message,name:p.path.join(".")})),result:null}:{errors:null,result:t}}async function Ea(e,a){try{return{errors:null,result:await a.validateAsync(e,{abortEarly:!1})}}catch(s){if(qa(s))return{errors:s.details.map(u=>({name:u.path.join("."),message:u.message})),result:null};throw s}}function Fa(e,a){if(xa(a))return Ia(e,a);if(Sa(a))return Ea(e,a);if(ya(a))return za(e,a);if(wa(a))return Aa(e,a);throw new Error("Form validation failed: Unsupported form schema")}class ee extends Error{constructor(s,t,u){super("Form validation exception");re(this,"formId");re(this,"errors");re(this,"children");this.formId=s,this.errors=t,this.children=u,Object.setPrototypeOf(this,ee.prototype)}}const Pa={base:""},Da={__name:"UForm",props:{id:{type:[String,Number],required:!1},schema:{type:null,required:!1},state:{type:Object,required:!0},validate:{type:Function,required:!1},validateOn:{type:Array,required:!1,default(){return["input","blur","change"]}},disabled:{type:Boolean,required:!1},validateOnInputDelay:{type:Number,required:!1,default:300},transform:{type:Boolean,required:!1,default:!0},attach:{type:Boolean,required:!1,default:!0},loadingAuto:{type:Boolean,required:!1,default:!0},class:{type:null,required:!1},onSubmit:{type:Function,required:!1}},emits:["submit","error"],setup(e,{expose:a,emit:s}){const t=e,u=s,p=de(),y=P(()=>{var r;return J({extend:J(Pa),...((r=p.ui)==null?void 0:r.form)||{}})}),o=t.id??Ee(),n=da(`form-${o}`),i=t.attach&&Ae(Se,void 0);U(Se,n);const l=A(new Map);oe(async()=>{n.on(async r=>{var h;r.type==="attach"?l.value.set(r.formId,{validate:r.validate}):r.type==="detach"?l.value.delete(r.formId):(h=t.validateOn)!=null&&h.includes(r.type)&&!S.value&&(r.type!=="input"?await v({name:r.name,silent:!0,nested:!1}):(r.eager||$.has(r.name))&&await v({name:r.name,silent:!0,nested:!1})),r.type==="blur"&&$.add(r.name),(r.type==="change"||r.type==="input"||r.type==="blur"||r.type==="focus")&&x.add(r.name),(r.type==="change"||r.type==="input")&&w.add(r.name)})}),we(()=>{n.reset()}),oe(async()=>{i&&(await Ye(),i.emit({type:"attach",validate:v,formId:o}))}),we(()=>{i&&i.emit({type:"detach",formId:o})});const f=A([]);U("form-errors",f);const q=A({});U(_e,q);const w=new Set,x=new Set,$=new Set;function c(r){return r.map(h=>{var E;return{...h,id:h!=null&&h.name?(E=q.value[h.name])==null?void 0:E.id:void 0}})}const g=A(null);async function m(){let r=t.validate?await t.validate(t.state)??[]:[];if(t.schema){const{errors:h,result:E}=await Fa(t.state,t.schema);h?r=r.concat(h):g.value=E}return c(r)}async function v(r={silent:!1,nested:!0,transform:!1}){const h=r.name&&!Array.isArray(r.name)?[r.name]:r.name,E=!h&&r.nested?Array.from(l.value.values()).map(({validate:I})=>I(r).then(()=>{}).catch(B=>{if(!(B instanceof ee))throw B;return B})):[];if(h){const I=f.value.filter(C=>!h.some(O=>{var V,D,d;const M=(D=(V=q.value)==null?void 0:V[O])==null?void 0:D.pattern;return O===C.name||M&&((d=C.name)==null?void 0:d.match(M))})),B=(await m()).filter(C=>h.some(O=>{var V,D,d;const M=(D=(V=q.value)==null?void 0:V[O])==null?void 0:D.pattern;return O===C.name||M&&((d=C.name)==null?void 0:d.match(M))}));f.value=I.concat(B)}else f.value=await m();const k=(await Promise.all(E)).filter(I=>I!==void 0);if(f.value.length+k.length>0){if(r.silent)return!1;throw new ee(o,f.value,k)}return r.transform&&Object.assign(t.state,g.value),t.state}const S=A(!1);U(Xe,se(S));async function te(r){var E;S.value=t.loadingAuto&&!0;const h=r;try{h.data=await v({nested:!0,transform:t.transform}),await((E=t.onSubmit)==null?void 0:E.call(t,h)),w.clear()}catch(k){if(!(k instanceof ee))throw k;const I={...h,errors:k.errors,children:k.children};u("error",I)}finally{S.value=!1}}const G=P(()=>t.disabled||S.value);return U(Ze,P(()=>({disabled:G.value,validateOnInputDelay:t.validateOnInputDelay}))),a({validate:v,errors:f,setErrors(r,h){h?f.value=f.value.filter(E=>E.name!==h).concat(c(r)):f.value=c(r)},async submit(){await te(new Event("submit"))},getErrors(r){return r?f.value.filter(h=>h.name===r):f.value},clear(r){r?f.value=f.value.filter(h=>h.name!==r):f.value=[]},disabled:G,loading:S,dirty:P(()=>!!w.size),dirtyFields:se(w),blurredFields:se($),touchedFields:se(x)}),(r,h)=>(F(),R(Qe(b(i)?"div":"form"),{id:b(o),class:z(y.value({class:t.class})),onSubmit:He(te,["prevent"])},{default:ae(()=>[N(r.$slots,"default",{errors:f.value})]),_:3},40,["id","class"]))}},$a=()=>ea().$firebaseApp,ka=e=>aa($a().name),Na={"auth/email-already-in-use":"This email is already in use.","auth/invalid-email":"The email address is not valid.","auth/user-disabled":"This user account has been disabled.","auth/user-not-found":"No account found with this email.","auth/wrong-password":"The password is incorrect.","auth/too-many-requests":"Too many attempts. Please try again later.","auth/weak-password":"The password is too weak.","auth/network-request-failed":"Network error. Please check your connection.","auth/operation-not-allowed":"This operation is not allowed.","auth/invalid-verification-code":"The verification code is invalid.","auth/invalid-verification-id":"The verification ID is invalid.","auth/invalid-credential":"Invalid Email Or Password.","auth/missing-email":"Please enter your email address.","auth/missing-password":"Please enter your password.","auth/expired-action-code":"This action code has expired.","auth/invalid-action-code":"This action code is invalid.","auth/account-exists-with-different-credential":"An account already exists with a different sign-in method.","auth/credential-already-in-use":"This credential is already associated with another account.","auth/popup-closed-by-user":"The popup was closed before completing the sign in.","auth/cancelled-popup-request":"Popup request was cancelled.","auth/popup-blocked":"The popup was blocked by the browser."};function Ba(e){return Na[e]||"An unexpected error occurred. Please try again."}const ja=ta("AuthStore",()=>{const e=ra(),a=sa(),s=ka(),t=A(null);ia();const u=A(!1),p=A(!1),y=A(null),o=A(!1),n=A(!1),i=A({email:"",password:"",rememberMe:!1}),l=A({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),f=P(()=>l.value.password&&l.value.confirmPassword&&l.value.password!==l.value.confirmPassword),q=P(()=>l.value.firstName&&l.value.lastName&&l.value.email&&l.value.password&&l.value.confirmPassword&&l.value.password===l.value.confirmPassword&&l.value.password.length>=8&&l.value.confirmPassword.length>=8&&!f.value),w=P(()=>i.value.email&&i.value.password&&i.value.password.length>=8),x=()=>{i.value.email="",i.value.password="",i.value.rememberMe=!1,l.value.firstName="",l.value.lastName="",l.value.email="",l.value.password="",l.value.confirmPassword="",y.value="",o.value=!1,n.value=!1};return{loginFormData:i,registerFormData:l,isLoggedIn:u,isLoading:p,passwordMismatch:f,showPassword:o,showConfirmPassword:n,isSignupFormValid:q,isLoginFormValid:w,user:s,errorMessage:y,userId:t,resetFormData:x,handleSignup:async()=>{p.value=!0;try{if(!e){console.error("Firebase auth is not initialized");return}const m=`${l.value.firstName} ${l.value.lastName}`,S=(await na(e,l.value.email,l.value.password)).user;await la(S,{displayName:m}),await oa(S),await qe(xe(a,"users",S.uid),{uid:S.uid,email:S.email,displayName:m,photoURL:null,createdAt:new Date}),x(),ne("/blogs")}catch(m){console.error("Signup failed:",m)}finally{p.value=!1}},handleLogin:async()=>{p.value=!0;try{if(!e){console.error("Firebase auth is not initialized");return}const v=(await ua(e,i.value.email,i.value.password)).user;await qe(xe(a,"users",v.uid),{uid:v.uid,email:v.email,displayName:v.displayName||"Anonymous",photoURL:v.photoURL||null,createdAt:new Date},{merge:!0}),x(),ne("/blogs"),u.value=!0}catch(m){const v=m;v.code&&(console.error("Error code:",v.code),y.value=Ba(v.code),console.error("Login failed:",y.value))}finally{p.value=!1}},logout:async()=>{p.value=!0;try{if(!e)throw new Error("Firebase auth is not initialized");await e.signOut(),u.value=!1,ne("/auth/login"),x()}catch(m){const v=m;y.value=v.message,console.error("Sign out failed:",v)}finally{p.value=!1}}}});export{ca as _,Da as a,Va as b,Ma as c,Oa as o,ja as u};
